function n(s){if(typeof s=="string")return s;try{return JSON.stringify(s,null,2)}catch{return String(s)}}self.onmessage=async s=>{const a=s.data;let e=[];const r={log:(...t)=>e.push({type:"log",payload:t.map(n)}),warn:(...t)=>e.push({type:"warn",payload:t.map(n)}),error:(...t)=>e.push({type:"error",payload:t.map(n)}),table:t=>e.push({type:"table",payload:n(t)}),clear:()=>{e=[]}};try{const t=Object.getPrototypeOf(async function(){}).constructor;await new t("console",a)(r),self.postMessage({logs:e})}catch(t){const o=t.stack?.match(/<anonymous>:(\d+):\d+/);self.postMessage({logs:e,error:{message:t.message,line:o?Number(o[1]):1}})}};
